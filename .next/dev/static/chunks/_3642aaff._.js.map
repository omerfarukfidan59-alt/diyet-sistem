{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GamerPC/OneDrive/Desktop/diyet-sistem/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\n// Bu instance, sadece anonim veya login olmuş kullanıcıların erişebileceği yetkilerle çalışır (Row Level Security - RLS kurallarına uyar)\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GamerPC/OneDrive/Desktop/diyet-sistem/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../utils/supabase\";\r\n\r\nexport default function AdminDashboard() {\r\n    const [stats, setStats] = useState([\r\n        { label: \"Toplam Danışan\", value: \"0\" },\r\n        { label: \"Aktif Diyet\", value: \"0\" },\r\n        { label: \"Besin Sayısı\", value: \"0\" },\r\n    ]);\r\n    const [recentClients, setRecentClients] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchDashboardData() {\r\n            setLoading(true);\r\n\r\n            // 1. Toplam Danışan ve Son İşlemler (Profiles)\r\n            const { data: clientsData } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('role', 'client')\r\n                .order('created_at', { ascending: false });\r\n\r\n            const safeClients = clientsData || [];\r\n\r\n            // 2. Aktif Diyetler \r\n            const { count: dietsCount } = await supabase\r\n                .from('diets')\r\n                .select('*', { count: 'exact', head: true })\r\n                .eq('is_active', true);\r\n\r\n            // 3. Besin Kütüphanesi\r\n            const { count: foodsCount } = await supabase\r\n                .from('food_library')\r\n                .select('*', { count: 'exact', head: true });\r\n\r\n            setStats([\r\n                { label: \"Toplam Danışan\", value: safeClients.length.toString() },\r\n                { label: \"Aktif Diyet\", value: (dietsCount || 0).toString() },\r\n                { label: \"Besin Sayısı\", value: (foodsCount || 0).toString() },\r\n            ]);\r\n\r\n            // En son eklenen 4 danışan\r\n            setRecentClients(safeClients.slice(0, 4));\r\n            setLoading(false);\r\n        }\r\n\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const router = useRouter();\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut();\r\n        localStorage.removeItem(\"currentUser\");\r\n        router.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <div style={{ minHeight: \"100vh\", background: \"#f4f7f4\", display: \"flex\", fontFamily: \"var(--font-body)\" }}>\r\n\r\n            {/* Admin Sidebar */}\r\n            <div style={{ width: \"280px\", background: \"#2c3e50\", color: \"white\", padding: \"40px 30px\", display: \"flex\", flexDirection: \"column\", gap: \"40px\" }}>\r\n                <div>\r\n                    <h2 style={{ fontSize: \"22px\", fontWeight: 800, color: \"#79a33d\" }}>Sümeyye Hanım</h2>\r\n                    <p style={{ fontSize: \"12px\", color: \"#bdc3c7\", marginTop: \"5px\" }}>Diyetisyen Admin Paneli</p>\r\n                </div>\r\n\r\n                <nav style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\" }}>\r\n                    <Link href=\"/admin\" style={activeNavLink}>Genel Bakış</Link>\r\n                    <Link href=\"/admin/clients\" style={navLink}>Danışan Yönetimi</Link>\r\n                    <Link href=\"/admin/food\" style={navLink}>Besin Kütüphanesi</Link>\r\n                    <Link href=\"/admin/appointments\" style={navLink}>Randevu Takvimi</Link>\r\n                    <Link href=\"/admin/reports\" style={navLink}>Raporlar</Link>\r\n                </nav>\r\n\r\n                <div style={{ marginTop: \"auto\" }}>\r\n                    <button onClick={handleLogout} style={{ background: \"none\", border: \"none\", color: \"#ecf0f1\", cursor: \"pointer\", fontSize: \"14px\", opacity: 0.8, padding: 0 }}>Oturumu Kapat</button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div style={{ flex: 1, padding: \"50px\", overflowY: \"auto\" }}>\r\n\r\n                <div style={{ marginBottom: \"40px\" }}>\r\n                    <h1 style={{ fontSize: \"32px\", fontWeight: 700, color: \"#2c3e50\" }}>Yönetim Paneli</h1>\r\n                    <p style={{ color: \"#7f8c8d\" }}>Hoş geldiniz Sümeyye Hanım. İşte bugünlük özetiniz.</p>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(3, 1fr)\", gap: \"25px\", marginBottom: \"50px\" }}>\r\n                    {stats.map((stat, i) => (\r\n                        <div key={i} style={{\r\n                            background: \"white\",\r\n                            padding: \"25px\",\r\n                            borderRadius: \"15px\",\r\n                            boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: \"20px\"\r\n                        }}>\r\n                            <div>\r\n                                <div style={{ fontSize: \"14px\", color: \"#95a5a6\", fontWeight: 600 }}>{stat.label}</div>\r\n                                <div style={{ fontSize: \"24px\", fontWeight: 800, color: \"#2c3e50\" }}>{stat.value}</div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div style={{ display: \"grid\", gridTemplateColumns: \"1.5fr 1fr\", gap: \"30px\" }}>\r\n\r\n                    {/* Recent Activity */}\r\n                    <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\" }}>\r\n                        <h3 style={{ fontSize: \"20px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"25px\" }}>Son İşlemler</h3>\r\n                        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"15px\" }}>\r\n                            {loading ? (\r\n                                <div style={{ color: \"#95a5a6\", fontSize: \"14px\" }}>Yükleniyor...</div>\r\n                            ) : recentClients.length === 0 ? (\r\n                                <div style={{ color: \"#95a5a6\", fontStyle: \"italic\", fontSize: \"14px\" }}>Henüz kayıtlı danışan yok.</div>\r\n                            ) : (\r\n                                recentClients.map((client: any, i: number) => (\r\n                                    <div key={i} style={{\r\n                                        padding: \"15px\",\r\n                                        border: \"1px solid #f1f1f1\",\r\n                                        borderRadius: \"12px\",\r\n                                        display: \"flex\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\"\r\n                                    }}>\r\n                                        <div>\r\n                                            <div style={{ fontWeight: 700, color: \"#2c3e50\" }}>{client.full_name}</div>\r\n                                            <div style={{ fontSize: \"12px\", color: \"#95a5a6\" }}>Yeni Danışan</div>\r\n                                        </div>\r\n                                        <span style={{\r\n                                            fontSize: \"12px\",\r\n                                            padding: \"5px 12px\",\r\n                                            borderRadius: \"20px\",\r\n                                            background: \"#eafaf1\",\r\n                                            color: \"#27ae60\",\r\n                                            fontWeight: 700\r\n                                        }}>\r\n                                            Aktif\r\n                                        </span>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Quick Actions */}\r\n                    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"25px\" }}>\r\n                        <div style={{ background: \"#79a33d\", padding: \"30px\", borderRadius: \"20px\", color: \"white\" }}>\r\n                            <h3 style={{ fontSize: \"20px\", fontWeight: 700, marginBottom: \"15px\" }}>Hızlı Diyet Yaz</h3>\r\n                            <p style={{ fontSize: \"14px\", opacity: 0.9, marginBottom: \"20px\" }}>Danışan seçerek saniyeler içinde yeni bir liste oluşturun.</p>\r\n                            <Link href=\"/admin/clients\" style={{\r\n                                background: \"white\",\r\n                                color: \"#79a33d\",\r\n                                border: \"none\",\r\n                                padding: \"12px 25px\",\r\n                                borderRadius: \"10px\",\r\n                                fontWeight: 700,\r\n                                textDecoration: \"none\",\r\n                                display: \"inline-block\",\r\n                                cursor: \"pointer\"\r\n                            }}>Danışanlara Git</Link>\r\n                        </div>\r\n\r\n                        <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", border: \"2px dashed #bdc3c7\" }}>\r\n                            <h3 style={{ fontSize: \"18px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"10px\" }}>Besin Kütüphanesi</h3>\r\n                            <p style={{ fontSize: \"13px\", color: \"#7f8c8d\", marginBottom: \"15px\" }}>Yeni besinler ekleyerek listenizi genişletin.</p>\r\n                            <Link href=\"/admin/food\" style={{ color: \"#79a33d\", fontWeight: 700, textDecoration: \"none\", fontSize: \"14px\" }}>Yönetmeye Başla →</Link>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst navLink: React.CSSProperties = {\r\n    padding: \"15px 20px\",\r\n    borderRadius: \"12px\",\r\n    color: \"#bdc3c7\",\r\n    textDecoration: \"none\",\r\n    fontSize: \"15px\",\r\n    transition: \"all 0.3s ease\",\r\n};\r\n\r\nconst activeNavLink: React.CSSProperties = {\r\n    ...navLink,\r\n    background: \"#34495e\",\r\n    color: \"white\",\r\n    fontWeight: 700\r\n};\r\n"],"names":[],"mappings":"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"}}]
}