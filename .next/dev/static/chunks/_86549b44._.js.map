{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GamerPC/OneDrive/Desktop/diyet-sistem/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\n// Bu instance, sadece anonim veya login olmuş kullanıcıların erişebileceği yetkilerle çalışır (Row Level Security - RLS kurallarına uyar)\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GamerPC/OneDrive/Desktop/diyet-sistem/app/dashboard/profile/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../../utils/supabase\";\r\n\r\nexport default function ProfilePage() {\r\n    const [formData, setFormData] = useState({\r\n        id: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        height: \"\",\r\n        weight: \"\",\r\n        age: \"\",\r\n        targetWeight: \"\"\r\n    });\r\n    const [saved, setSaved] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        async function fetchProfile() {\r\n            const { data: authData } = await supabase.auth.getUser();\r\n            if (!authData.user) {\r\n                // Fallback / legacy check\r\n                const loggedInUser = localStorage.getItem(\"currentUser\");\r\n                if (loggedInUser) setFormData(JSON.parse(loggedInUser));\r\n                return;\r\n            }\r\n\r\n            const { data: profile } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('id', authData.user.id)\r\n                .single();\r\n\r\n            if (profile) {\r\n                setFormData({\r\n                    id: profile.id,\r\n                    name: profile.full_name,\r\n                    email: \"\", // Artık kullanılmıyor\r\n                    height: profile.height,\r\n                    weight: profile.weight,\r\n                    age: profile.age,\r\n                    targetWeight: profile.target_weight\r\n                });\r\n            }\r\n        }\r\n\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        setSaved(false);\r\n    };\r\n\r\n    const handleUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        if (formData.id) {\r\n            // Supabase Update\r\n            const { error } = await supabase\r\n                .from('profiles')\r\n                .update({\r\n                    full_name: formData.name,\r\n                    height: Number(formData.height),\r\n                    weight: Number(formData.weight),\r\n                    age: Number(formData.age),\r\n                    target_weight: Number(formData.targetWeight)\r\n                })\r\n                .eq('id', formData.id);\r\n\r\n            if (error) {\r\n                alert(\"Güncelleme hatası: \" + error.message);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Aktif oturumu güncelle (Fallback/Legacy cache)\r\n        localStorage.setItem(\"currentUser\", JSON.stringify(formData));\r\n\r\n        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n        const updatedUsers = users.map((u: any) => u.id === (formData as any).id ? formData : u);\r\n        localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n\r\n        setSaved(true);\r\n        setLoading(false);\r\n        setTimeout(() => setSaved(false), 3000);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div style={{ flex: 1, padding: \"50px 20px\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\r\n                <div style={{ width: \"100%\", maxWidth: \"1000px\" }}>\r\n                    <div style={{ marginBottom: \"40px\", textAlign: \"center\" }}>\r\n                        <h1 style={{ fontSize: \"32px\", fontWeight: 700, color: \"#333\" }}>Hesap Ayarları</h1>\r\n                        <p style={{ color: \"#666\" }}>Profil bilgilerinizi ve fiziksel verilerinizi dilediğiniz zaman güncelleyebilirsiniz.</p>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleUpdate} style={{ background: \"white\", padding: \"40px\", borderRadius: \"20px\", boxShadow: \"0 10px 40px rgba(0,0,0,0.04)\", display: \"flex\", flexDirection: \"column\", gap: \"30px\", width: \"100%\" }}>\r\n\r\n                        <div style={{ borderBottom: \"1px solid #f0f0f0\", paddingBottom: \"15px\" }}>\r\n                            <h3 style={{ fontSize: \"18px\", fontWeight: 700, color: \"#3d5a2d\" }}>Vücut Verilerini Güncelle</h3>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            display: \"grid\",\r\n                            gridTemplateColumns: \"repeat(auto-fit, minmax(200px, 1fr))\",\r\n                            gap: \"25px\",\r\n                            width: \"100%\"\r\n                        }} className=\"stats-grid-mobile\">\r\n                            <div style={inputGroup}>\r\n                                <label style={labelStyle}>Boy (cm)</label>\r\n                                <input type=\"number\" name=\"height\" value={formData.height} onChange={handleChange} style={inputStyle} />\r\n                            </div>\r\n                            <div style={inputGroup}>\r\n                                <label style={labelStyle}>Güncel Kilo (kg)</label>\r\n                                <input type=\"number\" name=\"weight\" value={formData.weight} onChange={handleChange} style={inputStyle} />\r\n                            </div>\r\n                            <div style={inputGroup}>\r\n                                <label style={labelStyle}>Yaş</label>\r\n                                <input type=\"number\" name=\"age\" value={formData.age} onChange={handleChange} style={inputStyle} />\r\n                            </div>\r\n                            <div style={inputGroup}>\r\n                                <label style={labelStyle}>Hedef Kilo (kg)</label>\r\n                                <input type=\"number\" name=\"targetWeight\" value={formData.targetWeight} onChange={handleChange} style={inputStyle} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"20px\", marginTop: \"20px\" }}>\r\n                            <button\r\n                                type=\"submit\"\r\n                                style={{\r\n                                    background: \"#79a33d\",\r\n                                    color: \"white\",\r\n                                    padding: \"15px 40px\",\r\n                                    borderRadius: \"10px\",\r\n                                    border: \"none\",\r\n                                    fontSize: \"16px\",\r\n                                    fontWeight: 700,\r\n                                    cursor: \"pointer\",\r\n                                    transition: \"all 0.3s ease\",\r\n                                    boxShadow: \"0 10px 20px rgba(121, 163, 61, 0.15)\"\r\n                                }}\r\n                                onMouseEnter={(e) => e.currentTarget.style.background = \"#3d5a2d\"}\r\n                                onMouseLeave={(e) => e.currentTarget.style.background = \"#79a33d\"}\r\n                            >\r\n                                Bilgileri Güncelle\r\n                            </button>\r\n\r\n                            {saved && (\r\n                                <span style={{ color: \"#27ae60\", fontWeight: 600, animation: \"fadeIn 0.5s\" }}>\r\n                                    Değişiklikler başarıyla kaydedildi!\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n            <style jsx>{`\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; transform: translateX(-10px); }\r\n                    to { opacity: 1; transform: translateX(0); }\r\n                }\r\n                @media (max-width: 1024px) {\r\n                    form { padding: 25px !important; }\r\n                    .stats-grid-mobile { grid-template-columns: 1fr !important; }\r\n                }\r\n            `}</style>\r\n        </>\r\n    );\r\n}\r\n\r\nconst inputGroup: React.CSSProperties = {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: \"8px\"\r\n};\r\n\r\nconst labelStyle: React.CSSProperties = {\r\n    fontSize: \"14px\",\r\n    fontWeight: 700,\r\n    color: \"#555\"\r\n};\r\n\r\nconst inputStyle: React.CSSProperties = {\r\n    padding: \"14px 18px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #e0e0e0\",\r\n    outline: \"none\",\r\n    fontSize: \"15px\",\r\n    color: \"#333\",\r\n    fontWeight: 600,\r\n    transition: \"border-color 0.3s\",\r\n    background: \"#fff\"\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;QACrC,IAAI;QACJ,MAAM;QACN,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,KAAK;QACL,cAAc;IAClB;IACA,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;iCAAC;YACN,eAAe;gBACX,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,gIAAQ,CAAC,IAAI,CAAC,OAAO;gBACtD,IAAI,CAAC,SAAS,IAAI,EAAE;oBAChB,0BAA0B;oBAC1B,MAAM,eAAe,aAAa,OAAO,CAAC;oBAC1C,IAAI,cAAc,YAAY,KAAK,KAAK,CAAC;oBACzC;gBACJ;gBAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,gIAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EACzB,MAAM;gBAEX,IAAI,SAAS;oBACT,YAAY;wBACR,IAAI,QAAQ,EAAE;wBACd,MAAM,QAAQ,SAAS;wBACvB,OAAO;wBACP,QAAQ,QAAQ,MAAM;wBACtB,QAAQ,QAAQ,MAAM;wBACtB,KAAK,QAAQ,GAAG;wBAChB,cAAc,QAAQ,aAAa;oBACvC;gBACJ;YACJ;YAEA;QACJ;gCAAG,EAAE;IAEL,MAAM,eAAe,CAAC;QAClB,YAAY;YAAE,GAAG,QAAQ;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;QAC3D,SAAS;IACb;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI,SAAS,EAAE,EAAE;YACb,kBAAkB;YAClB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,gIAAQ,CAC3B,IAAI,CAAC,YACL,MAAM,CAAC;gBACJ,WAAW,SAAS,IAAI;gBACxB,QAAQ,OAAO,SAAS,MAAM;gBAC9B,QAAQ,OAAO,SAAS,MAAM;gBAC9B,KAAK,OAAO,SAAS,GAAG;gBACxB,eAAe,OAAO,SAAS,YAAY;YAC/C,GACC,EAAE,CAAC,MAAM,SAAS,EAAE;YAEzB,IAAI,OAAO;gBACP,MAAM,wBAAwB,MAAM,OAAO;gBAC3C,WAAW;gBACX;YACJ;QACJ;QAEA,iDAAiD;QACjD,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;QAEnD,MAAM,QAAQ,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,YAAY;QAC1D,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,AAAC,SAAiB,EAAE,GAAG,WAAW;QACtF,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;QAE7C,SAAS;QACT,WAAW;QACX,WAAW,IAAM,SAAS,QAAQ;IACtC;IAEA,qBACI;;0BACI,6LAAC;gBAAI,OAAO;oBAAE,MAAM;oBAAG,SAAS;oBAAa,SAAS;oBAAQ,eAAe;oBAAU,YAAY;gBAAS;;0BACxG,cAAA,6LAAC;oBAAI,OAAO;wBAAE,OAAO;wBAAQ,UAAU;oBAAS;;;sCAC5C,6LAAC;4BAAI,OAAO;gCAAE,cAAc;gCAAQ,WAAW;4BAAS;;;8CACpD,6LAAC;oCAAG,OAAO;wCAAE,UAAU;wCAAQ,YAAY;wCAAK,OAAO;oCAAO;;8CAAG;;;;;;8CACjE,6LAAC;oCAAE,OAAO;wCAAE,OAAO;oCAAO;;8CAAG;;;;;;;;;;;;sCAGjC,6LAAC;4BAAK,UAAU;4BAAc,OAAO;gCAAE,YAAY;gCAAS,SAAS;gCAAQ,cAAc;gCAAQ,WAAW;gCAAgC,SAAS;gCAAQ,eAAe;gCAAU,KAAK;gCAAQ,OAAO;4BAAO;;;8CAE/M,6LAAC;oCAAI,OAAO;wCAAE,cAAc;wCAAqB,eAAe;oCAAO;;8CACnE,cAAA,6LAAC;wCAAG,OAAO;4CAAE,UAAU;4CAAQ,YAAY;4CAAK,OAAO;wCAAU;;kDAAG;;;;;;;;;;;8CAGxE,6LAAC;oCAAI,OAAO;wCACR,SAAS;wCACT,qBAAqB;wCACrB,KAAK;wCACL,OAAO;oCACX;8EAAa;;sDACT,6LAAC;4CAAI,OAAO;;;8DACR,6LAAC;oDAAM,OAAO;;8DAAY;;;;;;8DAC1B,6LAAC;oDAAM,MAAK;oDAAS,MAAK;oDAAS,OAAO,SAAS,MAAM;oDAAE,UAAU;oDAAc,OAAO;;;;;;;;;;;;;sDAE9F,6LAAC;4CAAI,OAAO;;;8DACR,6LAAC;oDAAM,OAAO;;8DAAY;;;;;;8DAC1B,6LAAC;oDAAM,MAAK;oDAAS,MAAK;oDAAS,OAAO,SAAS,MAAM;oDAAE,UAAU;oDAAc,OAAO;;;;;;;;;;;;;sDAE9F,6LAAC;4CAAI,OAAO;;;8DACR,6LAAC;oDAAM,OAAO;;8DAAY;;;;;;8DAC1B,6LAAC;oDAAM,MAAK;oDAAS,MAAK;oDAAM,OAAO,SAAS,GAAG;oDAAE,UAAU;oDAAc,OAAO;;;;;;;;;;;;;sDAExF,6LAAC;4CAAI,OAAO;;;8DACR,6LAAC;oDAAM,OAAO;;8DAAY;;;;;;8DAC1B,6LAAC;oDAAM,MAAK;oDAAS,MAAK;oDAAe,OAAO,SAAS,YAAY;oDAAE,UAAU;oDAAc,OAAO;;;;;;;;;;;;;;;;;;;8CAI9G,6LAAC;oCAAI,OAAO;wCAAE,SAAS;wCAAQ,YAAY;wCAAU,KAAK;wCAAQ,WAAW;oCAAO;;;sDAChF,6LAAC;4CACG,MAAK;4CACL,OAAO;gDACH,YAAY;gDACZ,OAAO;gDACP,SAAS;gDACT,cAAc;gDACd,QAAQ;gDACR,UAAU;gDACV,YAAY;gDACZ,QAAQ;gDACR,YAAY;gDACZ,WAAW;4CACf;4CACA,cAAc,CAAC,IAAM,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG;4CACxD,cAAc,CAAC,IAAM,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG;;sDAC3D;;;;;;wCAIA,uBACG,6LAAC;4CAAK,OAAO;gDAAE,OAAO;gDAAW,YAAY;gDAAK,WAAW;4CAAc;;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqB9G;GAzKwB;;QAYL,kJAAS;;;KAZJ;AA2KxB,MAAM,aAAkC;IACpC,SAAS;IACT,eAAe;IACf,KAAK;AACT;AAEA,MAAM,aAAkC;IACpC,UAAU;IACV,YAAY;IACZ,OAAO;AACX;AAEA,MAAM,aAAkC;IACpC,SAAS;IACT,cAAc;IACd,QAAQ;IACR,SAAS;IACT,UAAU;IACV,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,YAAY;AAChB"}}]
}