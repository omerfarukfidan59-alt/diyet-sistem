{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GamerPC/OneDrive/Desktop/diyet-sistem/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../utils/supabase\";\r\n\r\nexport default function AdminDashboard() {\r\n    const [stats, setStats] = useState([\r\n        { label: \"Toplam Danışan\", value: \"0\" },\r\n        { label: \"Aktif Diyet\", value: \"0\" },\r\n        { label: \"Besin Sayısı\", value: \"0\" },\r\n    ]);\r\n    const [recentClients, setRecentClients] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchDashboardData() {\r\n            setLoading(true);\r\n\r\n            // 1. Toplam Danışan ve Son İşlemler (Profiles)\r\n            const { data: clientsData } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('role', 'client')\r\n                .order('created_at', { ascending: false });\r\n\r\n            const safeClients = clientsData || [];\r\n\r\n            // 2. Aktif Diyetler \r\n            const { count: dietsCount } = await supabase\r\n                .from('diets')\r\n                .select('*', { count: 'exact', head: true })\r\n                .eq('is_active', true);\r\n\r\n            // 3. Besin Kütüphanesi\r\n            const { count: foodsCount } = await supabase\r\n                .from('food_library')\r\n                .select('*', { count: 'exact', head: true });\r\n\r\n            setStats([\r\n                { label: \"Toplam Danışan\", value: safeClients.length.toString() },\r\n                { label: \"Aktif Diyet\", value: (dietsCount || 0).toString() },\r\n                { label: \"Besin Sayısı\", value: (foodsCount || 0).toString() },\r\n            ]);\r\n\r\n            // En son eklenen 4 danışan\r\n            setRecentClients(safeClients.slice(0, 4));\r\n            setLoading(false);\r\n        }\r\n\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const router = useRouter();\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut();\r\n        localStorage.removeItem(\"currentUser\");\r\n        router.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Admin main wrapper responsive padding */}\r\n            <div className=\"admin-page-wrapper\" style={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\r\n                <style jsx>{`\r\n                    .admin-page-wrapper {\r\n                        padding: 50px;\r\n                    }\r\n                    .stats-grid { grid-template-columns: repeat(3, 1fr); }\r\n                    .content-grid { grid-template-columns: 1.5fr 1fr; }\r\n\r\n                    @media (max-width: 1024px) {\r\n                        .admin-page-wrapper {\r\n                            padding: 20px;\r\n                        }\r\n                        .stats-grid { grid-template-columns: 1fr; }\r\n                        .content-grid { grid-template-columns: 1fr; }\r\n                    }\r\n                `}</style>\r\n\r\n                <div style={{ marginBottom: \"40px\" }}>\r\n                    <h1 style={{ fontSize: \"32px\", fontWeight: 700, color: \"#2c3e50\" }}>Yönetim Paneli</h1>\r\n                    <p style={{ color: \"#7f8c8d\" }}>Hoş geldiniz Sümeyye Hanım. İşte bugünlük özetiniz.</p>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"stats-grid\" style={{ display: \"grid\", gap: \"25px\", marginBottom: \"50px\" }}>\r\n\r\n                    {stats.map((stat, i) => (\r\n                        <div key={i} style={{\r\n                            background: \"white\",\r\n                            padding: \"25px\",\r\n                            borderRadius: \"15px\",\r\n                            boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: \"20px\"\r\n                        }}>\r\n                            <div>\r\n                                <div style={{ fontSize: \"14px\", color: \"#95a5a6\", fontWeight: 600 }}>{stat.label}</div>\r\n                                <div style={{ fontSize: \"24px\", fontWeight: 800, color: \"#2c3e50\" }}>{stat.value}</div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"content-grid\" style={{ display: \"grid\", gap: \"30px\" }}>\r\n\r\n\r\n                    {/* Recent Activity */}\r\n                    <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\" }}>\r\n                        <h3 style={{ fontSize: \"20px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"25px\" }}>Son İşlemler</h3>\r\n                        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"15px\" }}>\r\n                            {loading ? (\r\n                                <div style={{ color: \"#95a5a6\", fontSize: \"14px\" }}>Yükleniyor...</div>\r\n                            ) : recentClients.length === 0 ? (\r\n                                <div style={{ color: \"#95a5a6\", fontStyle: \"italic\", fontSize: \"14px\" }}>Henüz kayıtlı danışan yok.</div>\r\n                            ) : (\r\n                                recentClients.map((client: any, i: number) => (\r\n                                    <div key={i} style={{\r\n                                        padding: \"15px\",\r\n                                        border: \"1px solid #f1f1f1\",\r\n                                        borderRadius: \"12px\",\r\n                                        display: \"flex\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\"\r\n                                    }}>\r\n                                        <div>\r\n                                            <div style={{ fontWeight: 700, color: \"#2c3e50\" }}>{client.full_name}</div>\r\n                                            <div style={{ fontSize: \"12px\", color: \"#95a5a6\" }}>Yeni Danışan</div>\r\n                                        </div>\r\n                                        <span style={{\r\n                                            fontSize: \"12px\",\r\n                                            padding: \"5px 12px\",\r\n                                            borderRadius: \"20px\",\r\n                                            background: \"#eafaf1\",\r\n                                            color: \"#27ae60\",\r\n                                            fontWeight: 700\r\n                                        }}>\r\n                                            Aktif\r\n                                        </span>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Quick Actions */}\r\n                    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"25px\" }}>\r\n                        <div style={{ background: \"#79a33d\", padding: \"30px\", borderRadius: \"20px\", color: \"white\" }}>\r\n                            <h3 style={{ fontSize: \"20px\", fontWeight: 700, marginBottom: \"15px\" }}>Hızlı Diyet Yaz</h3>\r\n                            <p style={{ fontSize: \"14px\", opacity: 0.9, marginBottom: \"20px\" }}>Danışan seçerek saniyeler içinde yeni bir liste oluşturun.</p>\r\n                            <a href=\"/admin/clients\" style={{\r\n                                background: \"white\",\r\n                                color: \"#79a33d\",\r\n                                border: \"none\",\r\n                                padding: \"12px 25px\",\r\n                                borderRadius: \"10px\",\r\n                                fontWeight: 700,\r\n                                textDecoration: \"none\",\r\n                                display: \"inline-block\",\r\n                                cursor: \"pointer\"\r\n                            }}>Danışanlara Git</a>\r\n                        </div>\r\n\r\n                        <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", border: \"2px dashed #bdc3c7\" }}>\r\n                            <h3 style={{ fontSize: \"18px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"10px\" }}>Besin Kütüphanesi</h3>\r\n                            <p style={{ fontSize: \"13px\", color: \"#7f8c8d\", marginBottom: \"15px\" }}>Yeni besinler ekleyerek listenizi genişletin.</p>\r\n                            <a href=\"/admin/food\" style={{ color: \"#79a33d\", fontWeight: 700, textDecoration: \"none\", fontSize: \"14px\" }}>Yönetmeye Başla →</a>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}