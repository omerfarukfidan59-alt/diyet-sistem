module.exports=[27810,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64193);function f(){let a=(0,d.useRouter)(),[f,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(new Date().toISOString().split("T")[0]),[q,r]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){r(!0);let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.push("/login");let{data:c}=await e.supabase.from("profiles").select("*").eq("id",b.id).single();c&&j({id:c.id,name:c.full_name,weight:Number(c.weight),targetWeight:Number(c.target_weight)});let{data:d}=await e.supabase.from("weight_logs").select("*").eq("client_id",b.id).order("log_date",{ascending:!0});d&&d.length>0?l(d.map(a=>({date:a.log_date,weight:Number(a.weight)}))):c&&c.weight&&l([{date:new Date().toISOString().split("T")[0],weight:Number(c.weight)}]),r(!1)}()},[a]);let s=async a=>{let b;if(a.preventDefault(),!m||isNaN(Number(m)))return alert("Geçerli bir kilo giriniz.");let c=o||new Date().toISOString().split("T")[0];r(!0);let{data:d}=await e.supabase.from("weight_logs").select("id").eq("client_id",f.id).eq("log_date",c).maybeSingle();if(d){let{error:a}=await e.supabase.from("weight_logs").update({weight:Number(m)}).eq("id",d.id);b=a}else{let{error:a}=await e.supabase.from("weight_logs").insert({client_id:f.id,log_date:c,weight:Number(m)});b=a}if(b){alert("Kilo kaydedilemedi: "+b.message),r(!1);return}let{error:g}=await e.supabase.from("profiles").update({weight:Number(m)}).eq("id",f.id);g||j({...f,weight:Number(m)});let{data:h}=await e.supabase.from("weight_logs").select("*").eq("client_id",f.id).order("log_date",{ascending:!0});h&&l(h.map(a=>({date:a.log_date,weight:Number(a.weight)}))),n(""),r(!1)};if(q||!f)return(0,b.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Yükleniyor..."});let t=k.map(a=>a.weight),u=Number(f.targetWeight)||0,v=Math.min(...t,u)-2,w=Math.max(...t,u)+2,x=w-v,y=a=>1===k.length?400:40+a*(720/(k.length-1)),z=a=>260-(a-v)/x*220,A=z(u),B=k.map((a,b)=>{let c=y(b),d=z(a.weight);return`${0===b?"M":"L"} ${c} ${d}`}).join(" ");return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{flex:1,padding:"50px 40px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,b.jsxs)("div",{style:{width:"100%",maxWidth:"1000px"},children:[(0,b.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,b.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#333",marginBottom:"10px"},children:"Gelişim Grafiği"}),(0,b.jsx)("p",{style:{color:"#666"},children:"Zaman içindeki kilo değişiminizi ve hedefinize olan uzaklığınızı buradan takip edebilirsiniz."})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"25px",marginBottom:"40px"},className:"stats-grid-mobile",children:[(0,b.jsxs)("div",{style:g,children:[(0,b.jsx)("div",{style:h,children:"Güncel Kilo"}),(0,b.jsxs)("div",{style:i,children:[f.weight," ",(0,b.jsx)("span",{style:{fontSize:"16px",color:"#95a5a6"},children:"kg"})]})]}),(0,b.jsxs)("div",{style:g,children:[(0,b.jsx)("div",{style:h,children:"Hedef Kilo"}),(0,b.jsxs)("div",{style:i,children:[u," ",(0,b.jsx)("span",{style:{fontSize:"16px",color:"#95a5a6"},children:"kg"})]})]}),(0,b.jsxs)("div",{style:{...g,background:"#79a33d",color:"white"},children:[(0,b.jsx)("div",{style:{...h,color:"rgba(255,255,255,0.8)"},children:"Kalan Yol"}),(0,b.jsxs)("div",{style:{...i,color:"white"},children:[Math.abs(Number(f.weight)-u).toFixed(1)," ",(0,b.jsx)("span",{style:{fontSize:"16px",color:"rgba(255,255,255,0.8)"},children:"kg"})]})]})]}),(0,b.jsxs)("div",{style:{background:"white",padding:"40px",borderRadius:"20px",boxShadow:"0 10px 40px rgba(0,0,0,0.04)",marginBottom:"40px",overflowX:"auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[(0,b.jsx)("h3",{style:{fontSize:"20px",fontWeight:700,color:"#3d5a2d"},children:"Kilo Değişim Grafiği"}),(0,b.jsx)("div",{style:{fontSize:"14px",color:"#7f8c8d",fontWeight:600},children:"Dikey: Kilo (kg) | Yatay: Tarih (Gün)"})]}),k.length>0?(0,b.jsx)("div",{style:{minWidth:"600px",position:"relative"},children:(0,b.jsxs)("svg",{width:"100%",height:300,viewBox:"0 0 800 300",style:{overflow:"visible"},children:[(0,b.jsx)("line",{x1:40,y1:10,x2:40,y2:260,stroke:"#bdc3c7",strokeWidth:"2"}),(0,b.jsx)("text",{x:40,y:0,fill:"#2c3e50",fontSize:"13",fontWeight:"bold",textAnchor:"middle",children:"Kilo (kg)"}),[0,.25,.5,.75,1].map((a,c)=>{let d=40+220*a;return(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{x1:40,y1:d,x2:780,y2:d,stroke:"#f0f0f0",strokeWidth:"1"}),(0,b.jsx)("text",{x:30,y:d+4,fill:"#95a5a6",fontSize:"11",textAnchor:"end",children:(w-x*a).toFixed(1)})]},c)}),(0,b.jsx)("line",{x1:40,y1:260,x2:800,y2:260,stroke:"#bdc3c7",strokeWidth:"2"}),(0,b.jsx)("text",{x:815,y:264,fill:"#2c3e50",fontSize:"13",fontWeight:"bold",textAnchor:"start",children:"Gün"}),u>0&&(0,b.jsxs)("g",{children:[(0,b.jsx)("line",{x1:40,y1:A,x2:780,y2:A,stroke:"#e74c3c",strokeWidth:"2",strokeDasharray:"5,5"}),(0,b.jsxs)("text",{x:790,y:A+4,fill:"#e74c3c",fontSize:"12",fontWeight:"bold",children:["Hedef: ",u,"kg"]})]}),k.length>1?(0,b.jsx)("path",{d:B,fill:"none",stroke:"#79a33d",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}):1===k.length&&(0,b.jsx)("line",{x1:40,y1:z(k[0].weight),x2:y(0),y2:z(k[0].weight),stroke:"#79a33d",strokeWidth:"4",strokeDasharray:"10,10",opacity:.3}),k.map((a,c)=>{let d=y(c),e=z(a.weight);return(0,b.jsxs)("g",{children:[(0,b.jsx)("circle",{cx:d,cy:e,r:"6",fill:"#79a33d",stroke:"white",strokeWidth:"2"}),(0,b.jsx)("circle",{cx:d,cy:e,r:"10",fill:"transparent",stroke:"#79a33d",strokeWidth:"2",opacity:"0.5"}),(0,b.jsxs)("text",{x:d,y:e-20,textAnchor:"middle",fill:"#2c3e50",fontSize:"13",fontWeight:"bold",children:[a.weight,"kg"]}),(0,b.jsx)("line",{x1:d,y1:260,x2:d,y2:265,stroke:"#bdc3c7",strokeWidth:"2"}),(0,b.jsx)("text",{x:d,y:280,textAnchor:"middle",fill:"#95a5a6",fontSize:"11",children:new Date(a.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short"})})]},c)})]})}):(0,b.jsx)("div",{style:{textAlign:"center",padding:"50px",color:"#95a5a6"},children:"Henüz yeterli kilo verisi girilmedi."})]}),(0,b.jsxs)("div",{style:{background:"white",padding:"40px",borderRadius:"20px",boxShadow:"0 10px 40px rgba(0,0,0,0.04)"},children:[(0,b.jsx)("h3",{style:{fontSize:"18px",fontWeight:700,color:"#333",marginBottom:"20px"},children:"Yeni Tartım Ekle"}),(0,b.jsxs)("form",{onSubmit:s,style:{display:"flex",flexWrap:"wrap",gap:"15px",alignItems:"flex-end"},children:[(0,b.jsxs)("div",{style:{flex:1,minWidth:"200px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,b.jsx)("label",{style:{fontSize:"13px",fontWeight:700,color:"#666"},children:"Tarih Seçimi"}),(0,b.jsx)("input",{type:"date",value:o,onChange:a=>p(a.target.value),style:{padding:"15px 20px",borderRadius:"10px",border:"1px solid #e0e0e0",outline:"none",fontSize:"15px",fontWeight:600,fontFamily:"inherit"}})]}),(0,b.jsxs)("div",{style:{flex:1,minWidth:"200px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,b.jsx)("label",{style:{fontSize:"13px",fontWeight:700,color:"#666"},children:"Kilonuz (kg)"}),(0,b.jsx)("input",{type:"number",step:"0.1",value:m,onChange:a=>n(a.target.value),placeholder:"Örn: 74.5",style:{padding:"15px 20px",borderRadius:"10px",border:"1px solid #e0e0e0",outline:"none",fontSize:"15px",fontWeight:600}})]}),(0,b.jsx)("button",{type:"submit",style:{background:"#79a33d",color:"white",padding:"15px 30px",borderRadius:"10px",border:"none",fontSize:"15px",fontWeight:700,cursor:"pointer",boxShadow:"0 10px 20px rgba(121, 163, 61, 0.2)"},children:"++ Ekle"})]})]})]})}),(0,b.jsx)("style",{children:`
            @media (max-width: 1024px) {
                .stats-grid-mobile {
                    grid-template-columns: 1fr !important;
                }
            }
            `})]})}let g={background:"white",padding:"30px",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},h={fontSize:"14px",fontWeight:700,color:"#7f8c8d",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"1px"},i={fontSize:"36px",fontWeight:800,color:"#2c3e50"};a.s(["default",()=>f])}];

//# sourceMappingURL=app_dashboard_progress_page_tsx_0c48722f._.js.map