module.exports=[96490,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(64193);function f(){let[f,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({full_name:"",height:"",weight:"",target_weight:"",age:"",gender:"Erkek"});async function u(){n(!0);let{data:a,error:b}=await e.supabase.from("profiles").select("*").eq("role","client").order("created_at",{ascending:!1});!b&&a&&l(a),n(!1)}(0,c.useEffect)(()=>{u()},[]);let v=async b=>{b.preventDefault(),r(!0);try{let{createClient:b}=await a.A(39143),c=b("https://gmdjktwstzuhlbnkfsmh.supabase.co","sb_publishable_4ZAWHxhYMwyCmz6K2OTnTw_gnWbcDXN",{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),d=`manual_${Date.now()}@diyet.local`,f="Password"+Math.random().toString(36).slice(-8)+"!",{data:g,error:h}=await c.auth.signUp({email:d,password:f,options:{data:{full_name:s.full_name,role:"client"}}});if(h)throw h;if(g.user){let{error:a}=await e.supabase.from("profiles").upsert({id:g.user.id,full_name:s.full_name,role:"client",height:Number(s.height),weight:Number(s.weight),target_weight:Number(s.target_weight),age:Number(s.age),gender:s.gender});if(a)throw a;alert("Danışan başarıyla eklendi!"),p(!1),t({full_name:"",height:"",weight:"",target_weight:"",age:"",gender:"Erkek"}),u()}}catch(a){console.error("Ekleme hatası:",a),alert("Danışan eklenirken bir hata oluştu: "+a.message)}finally{r(!1)}},w=async(a,b)=>{if(!window.confirm(`${b} isimli danışanı silmek istediğinize emin misiniz? Bu işlem geri alınamaz ve o kişiye ait t\xfcm veriler (diyet, gelişim, kilo, giriş hesabı) kalıcı olarak silinir.`))return;localStorage.removeItem(`diet_${a}`),localStorage.removeItem(`dietProgress_${a}`),localStorage.removeItem(`weightLogs_${a}`);let{error:c,count:d}=await e.supabase.from("profiles").delete({count:"exact"}).eq("id",a);c?(console.error("Silme hatası:",c),alert("Silme işlemi başarısız: "+c.message)):0===d?alert("Uyarı: Kullanıcı veritabanında bulunamadı veya silme izniniz yok (RLS). Lütfen SQL politikalarını kontrol edin."):(l(f.filter(b=>b.id!==a)),alert("Danışan ve tüm verileri başarıyla silindi."))};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#2c3e50"},children:"Danışan Yönetimi"}),(0,b.jsx)("p",{style:{color:"#7f8c8d"},children:"Sisteme kayıtlı tüm danışanlarınızın listesi ve analiz verileri."})]}),(0,b.jsx)("button",{onClick:()=>p(!0),style:{background:"#79a33d",color:"white",border:"none",padding:"12px 24px",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 6px rgba(121, 163, 61, 0.2)"},children:"+ Danışan Ekle"})]}),(0,b.jsx)("div",{style:{background:"white",borderRadius:"20px",overflowX:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.02)"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{style:{background:"#fcfdfe"},children:(0,b.jsxs)("tr",{style:{textAlign:"left"},children:[(0,b.jsx)("th",{style:g,children:"Ad Soyad"}),(0,b.jsx)("th",{style:g,children:"Boy"}),(0,b.jsx)("th",{style:g,children:"Kilo"}),(0,b.jsx)("th",{style:g,children:"VKI"}),(0,b.jsx)("th",{style:g,children:"BMH"}),(0,b.jsx)("th",{style:g,children:"Hedef"}),(0,b.jsx)("th",{style:g,children:"İşlemler"})]})}),(0,b.jsx)("tbody",{children:m?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Yükleniyor..."})}):f.length>0?f.map(a=>{let c=(Number(a.weight)/(Number(a.height)/100)**2).toFixed(1),e=Number(a.age)||30,f=a.gender||"Erkek",g=0,j=Number(a.target_weight)||Number(a.weight);return g="Kadın"===f?Math.round(10*j+6.25*Number(a.height)-5*e-161):Math.round(10*j+6.25*Number(a.height)-5*e+5),(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #f1f1f1"},children:[(0,b.jsxs)("td",{style:h,children:[(0,b.jsx)("div",{style:{fontWeight:700,color:"#2c3e50"},children:a.full_name}),(0,b.jsxs)("div",{style:{fontSize:"12px",color:"#95a5a6"},children:[a.height," cm | ",a.weight," kg"]})]}),(0,b.jsxs)("td",{style:h,children:[a.height," cm"]}),(0,b.jsxs)("td",{style:h,children:[a.weight," kg"]}),(0,b.jsx)("td",{style:h,children:(0,b.jsx)("span",{style:{background:"#f1f1f1",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600},children:c})}),(0,b.jsx)("td",{style:h,children:(0,b.jsxs)("span",{style:{background:"#f8f9fa",color:"#e67e22",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:700},children:[g," ",(0,b.jsx)("span",{style:{fontSize:"10px",color:"#95a5a6",fontWeight:"normal"},children:"kcal"})]})}),(0,b.jsxs)("td",{style:h,children:[a.target_weight," kg"]}),(0,b.jsx)("td",{style:h,children:(0,b.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,b.jsx)(d.default,{href:`/admin/clients/${a.id}/diet`,style:{textDecoration:"none",background:"#79a33d",color:"white",padding:"8px 15px",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:"Diyet Hazırla"}),(0,b.jsx)("button",{onClick:()=>w(a.id,a.full_name),style:{...i,color:"#e74c3c",fontSize:"14px",fontWeight:"bold",padding:"8px 15px"},children:"Sil"})]})})]},a.id)}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Henüz kayıtlı danışan bulunmuyor."})})})]})}),o&&(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,b.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"15px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[(0,b.jsx)("h2",{style:{marginTop:0,marginBottom:"20px",color:"#2c3e50"},children:"Manuel Danışan Ekle"}),(0,b.jsxs)("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:j,children:"Ad Soyad"}),(0,b.jsx)("input",{required:!0,type:"text",style:k,value:s.full_name,onChange:a=>t({...s,full_name:a.target.value}),placeholder:"Örn: Ali Yılmaz"})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("label",{style:j,children:"Boy (cm)"}),(0,b.jsx)("input",{required:!0,type:"number",style:k,value:s.height,onChange:a=>t({...s,height:a.target.value}),placeholder:"180"})]}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("label",{style:j,children:"Kilo (kg)"}),(0,b.jsx)("input",{required:!0,type:"number",step:"0.1",style:k,value:s.weight,onChange:a=>t({...s,weight:a.target.value}),placeholder:"75"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("label",{style:j,children:"Hedef Kilo (kg)"}),(0,b.jsx)("input",{required:!0,type:"number",step:"0.1",style:k,value:s.target_weight,onChange:a=>t({...s,target_weight:a.target.value}),placeholder:"70"})]}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("label",{style:j,children:"Yaş"}),(0,b.jsx)("input",{required:!0,type:"number",style:k,value:s.age,onChange:a=>t({...s,age:a.target.value}),placeholder:"30"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:j,children:"Cinsiyet"}),(0,b.jsxs)("select",{style:k,value:s.gender,onChange:a=>t({...s,gender:a.target.value}),children:[(0,b.jsx)("option",{value:"Erkek",children:"Erkek"}),(0,b.jsx)("option",{value:"Kadın",children:"Kadın"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>p(!1),style:{padding:"10px 20px",border:"none",background:"#ecf0f1",color:"#7f8c8d",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"İptal"}),(0,b.jsx)("button",{type:"submit",disabled:q,style:{padding:"10px 20px",border:"none",background:"#79a33d",color:"white",borderRadius:"8px",cursor:q?"not-allowed":"pointer",fontWeight:600,opacity:q?.7:1},children:q?"Ekleniyor...":"Kaydet"})]})]})]})})]})})}let g={padding:"20px",color:"#95a5a6",fontSize:"13px",textTransform:"uppercase",letterSpacing:"1px",fontWeight:700},h={padding:"20px",color:"#2c3e50",fontSize:"15px"},i={background:"none",border:"none",cursor:"pointer",fontSize:"18px",padding:"5px",borderRadius:"5px",transition:"background 0.3s"},j={display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:600,color:"#34495e"},k={width:"100%",padding:"10px 15px",border:"1px solid #bdc3c7",borderRadius:"8px",fontSize:"15px",boxSizing:"border-box",outline:"none",transition:"border-color 0.3s"};a.s(["default",()=>f])},39143,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_@supabase_supabase-js_dist_index_mjs_c2473bf6._.js"].map(b=>a.l(b))).then(()=>b(20751)))}];

//# sourceMappingURL=_0ba89322._.js.map