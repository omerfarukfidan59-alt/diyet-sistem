module.exports=[18485,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64193);function f(){let[a,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)({}),[m,n]=(0,c.useState)(!0),o=(0,d.useRouter)();(0,c.useEffect)(()=>{!async function(){n(!0);let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return o.push("/login");let{data:b}=await e.supabase.from("profiles").select("*").eq("id",a.id).single();b&&f(b);let{data:c}=await e.supabase.from("diets").select("*").eq("client_id",a.id).eq("is_active",!0).maybeSingle();c&&c.content&&h(c.content);let{data:d}=await e.supabase.from("diet_progress").select("*").eq("client_id",a.id);if(d){let a={};d.forEach(b=>{a[b.day_number-1]={completed:b.is_completed,note:b.note}}),l(a)}n(!1)}()},[o]);let p=async()=>{let b;if(!a)return;n(!0);let c=k[i]||{completed:!1,note:""},{data:d}=await e.supabase.from("diet_progress").select("id").eq("client_id",a.id).eq("day_number",i+1).maybeSingle();if(d){let{error:a}=await e.supabase.from("diet_progress").update({is_completed:c.completed,note:c.note}).eq("id",d.id);b=a}else{let{error:d}=await e.supabase.from("diet_progress").insert({client_id:a.id,day_number:i+1,is_completed:c.completed,note:c.note});b=d}b?alert("Değerlendirme gönderilemedi: "+b.message):alert("Değerlendirmeniz başarıyla kaydedildi! Diyetisyeniniz bunu görebilecektir."),n(!1)};return m||!a?(0,b.jsx)("div",{children:"Yükleniyor..."}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,b.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#333"},children:"Günlük Diyet Listem"}),(0,b.jsx)("p",{style:{color:"#666"},children:"Diyetisyeniniz tarafından size özel hazırlanan beslenme programı."})]}),g&&g.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{display:"flex",gap:"10px",marginBottom:"25px",overflowX:"auto",paddingBottom:"10px"},children:g.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>j(c),style:{padding:"12px 25px",background:i===c?"#79a33d":"white",color:i===c?"white":"#333",border:`1px solid ${i===c?"#79a33d":"#e0e0e0"}`,borderRadius:"10px",fontWeight:700,cursor:"pointer",transition:"all 0.2s"},children:[a.day||c+1,". Gün"]},c))}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"25px"},children:[{key:"breakfast",label:"Kahvaltı"},{key:"lunch",label:"Öğle Yemeği"},{key:"snacks",label:"Ara Öğünler"},{key:"dinner",label:"Akşam Yemeği"}].map(a=>(0,b.jsxs)("div",{style:{background:"white",padding:"25px",borderRadius:"15px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,b.jsx)("h3",{style:{fontSize:"18px",fontWeight:700,color:"#3d5a2d",marginBottom:"15px"},children:a.label}),g[i]&&g[i][a.key]&&g[i][a.key].length>0?(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{style:{textAlign:"left",fontSize:"12px",color:"#888",borderBottom:"1px solid #f0f0f0"},children:[(0,b.jsx)("th",{style:{padding:"10px"},children:"Besin"}),(0,b.jsx)("th",{style:{padding:"10px"},children:"Porsiyon"}),(0,b.jsx)("th",{style:{padding:"10px",textAlign:"right"},children:"Kalori"})]})}),(0,b.jsx)("tbody",{children:g[i][a.key].map((a,c)=>(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #f9f9f9"},children:[(0,b.jsx)("td",{style:{padding:"12px 10px",fontWeight:600,color:"#333"},children:a.food}),(0,b.jsx)("td",{style:{padding:"12px 10px",color:"#666"},children:a.portion}),(0,b.jsxs)("td",{style:{padding:"12px 10px",color:"#79a33d",fontWeight:700,textAlign:"right"},children:[a.cal," kcal"]})]},c))})]}):(0,b.jsx)("p",{style:{color:"#999",fontSize:"14px"},children:"Bu öğün için program belirtilmemiş."})]},a.key))}),(0,b.jsxs)("div",{style:{marginTop:"40px",background:"white",padding:"30px",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,b.jsx)("h3",{style:{fontSize:"20px",fontWeight:800,color:"#2c3e50",marginBottom:"20px"},children:"Gün Sonu Değerlendirmesi"}),(0,b.jsx)("p",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"20px"},children:"Diyetisyeninize bu günü nasıl geçirdiğinizi bildirin."}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"10px"},children:[(0,b.jsx)("input",{type:"checkbox",id:"completedCheck",checked:k[i]?.completed||!1,onChange:a=>{let b={...k};b[i]||(b[i]={completed:!1,note:""}),b[i].completed=a.target.checked,l(b)},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#79a33d"}}),(0,b.jsx)("label",{htmlFor:"completedCheck",style:{fontWeight:600,color:"#333",cursor:"pointer",fontSize:"15px"},children:"Bugünkü listemi eksiksiz uyguladım ✅"})]}),(0,b.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,b.jsx)("label",{style:{display:"block",fontWeight:600,color:"#333",marginBottom:"10px",fontSize:"15px"},children:"Diyetisyeninize bir not bırakın (İsteğe bağlı)"}),(0,b.jsx)("textarea",{value:k[i]?.note||"",onChange:a=>{let b={...k};b[i]||(b[i]={completed:!1,note:""}),b[i].note=a.target.value,l(b)},placeholder:"Örn: Akşam yemeğinde doyduğum için salatayı yarım bıraktım...",style:{width:"100%",padding:"15px",borderRadius:"10px",border:"1px solid #ddd",minHeight:"100px",fontFamily:"inherit",fontSize:"14px",resize:"vertical"}})]}),(0,b.jsx)("button",{onClick:p,style:{background:"#79a33d",color:"white",border:"none",padding:"15px 30px",borderRadius:"10px",fontWeight:700,fontSize:"15px",cursor:"pointer",width:"100%",transition:"background 0.3s"},children:"Değerlendirmeyi Kaydet"})]})]}):(0,b.jsxs)("div",{style:{background:"white",padding:"100px",borderRadius:"20px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,b.jsx)("div",{style:{fontSize:"50px",marginBottom:"20px"}}),(0,b.jsx)("h2",{style:{color:"#3d5a2d"},children:"Henüz Diyet Listeniz Hazır Değil"}),(0,b.jsx)("p",{style:{color:"#888",maxWidth:"400px",margin:"10px auto"},children:"Diyetisyeniniz listenizi tamamladığında burada anlık olarak görebileceksiniz."})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_dashboard_menu_page_tsx_d43e2366._.js.map