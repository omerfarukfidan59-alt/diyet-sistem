{"version":3,"sources":["../../../../app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../utils/supabase\";\r\n\r\nexport default function AdminDashboard() {\r\n    const [stats, setStats] = useState([\r\n        { label: \"Toplam Danışan\", value: \"0\" },\r\n        { label: \"Aktif Diyet\", value: \"0\" },\r\n        { label: \"Besin Sayısı\", value: \"0\" },\r\n    ]);\r\n    const [recentClients, setRecentClients] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchDashboardData() {\r\n            setLoading(true);\r\n\r\n            // 1. Toplam Danışan ve Son İşlemler (Profiles)\r\n            const { data: clientsData } = await supabase\r\n                .from('profiles')\r\n                .select('*')\r\n                .eq('role', 'client')\r\n                .order('created_at', { ascending: false });\r\n\r\n            const safeClients = clientsData || [];\r\n\r\n            // 2. Aktif Diyetler \r\n            const { count: dietsCount } = await supabase\r\n                .from('diets')\r\n                .select('*', { count: 'exact', head: true })\r\n                .eq('is_active', true);\r\n\r\n            // 3. Besin Kütüphanesi\r\n            const { count: foodsCount } = await supabase\r\n                .from('food_library')\r\n                .select('*', { count: 'exact', head: true });\r\n\r\n            setStats([\r\n                { label: \"Toplam Danışan\", value: safeClients.length.toString() },\r\n                { label: \"Aktif Diyet\", value: (dietsCount || 0).toString() },\r\n                { label: \"Besin Sayısı\", value: (foodsCount || 0).toString() },\r\n            ]);\r\n\r\n            // En son eklenen 4 danışan\r\n            setRecentClients(safeClients.slice(0, 4));\r\n            setLoading(false);\r\n        }\r\n\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const router = useRouter();\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut();\r\n        localStorage.removeItem(\"currentUser\");\r\n        router.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Admin main wrapper responsive padding */}\r\n            <div className=\"admin-page-wrapper\" style={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\r\n                <style jsx>{`\r\n                    .admin-page-wrapper {\r\n                        padding: 50px;\r\n                    }\r\n                    .stats-grid { grid-template-columns: repeat(3, 1fr); }\r\n                    .content-grid { grid-template-columns: 1.5fr 1fr; }\r\n\r\n                    @media (max-width: 1024px) {\r\n                        .admin-page-wrapper {\r\n                            padding: 20px;\r\n                        }\r\n                        .stats-grid { grid-template-columns: 1fr; }\r\n                        .content-grid { grid-template-columns: 1fr; }\r\n                    }\r\n                `}</style>\r\n\r\n                <div style={{ marginBottom: \"40px\" }}>\r\n                    <h1 style={{ fontSize: \"32px\", fontWeight: 700, color: \"#2c3e50\" }}>Yönetim Paneli</h1>\r\n                    <p style={{ color: \"#7f8c8d\" }}>Hoş geldiniz Sümeyye Hanım. İşte bugünlük özetiniz.</p>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"stats-grid\" style={{ display: \"grid\", gap: \"25px\", marginBottom: \"50px\" }}>\r\n\r\n                    {stats.map((stat, i) => (\r\n                        <div key={i} style={{\r\n                            background: \"white\",\r\n                            padding: \"25px\",\r\n                            borderRadius: \"15px\",\r\n                            boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: \"20px\"\r\n                        }}>\r\n                            <div>\r\n                                <div style={{ fontSize: \"14px\", color: \"#95a5a6\", fontWeight: 600 }}>{stat.label}</div>\r\n                                <div style={{ fontSize: \"24px\", fontWeight: 800, color: \"#2c3e50\" }}>{stat.value}</div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"content-grid\" style={{ display: \"grid\", gap: \"30px\" }}>\r\n\r\n\r\n                    {/* Recent Activity */}\r\n                    <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", boxShadow: \"0 10px 20px rgba(0,0,0,0.02)\" }}>\r\n                        <h3 style={{ fontSize: \"20px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"25px\" }}>Son İşlemler</h3>\r\n                        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"15px\" }}>\r\n                            {loading ? (\r\n                                <div style={{ color: \"#95a5a6\", fontSize: \"14px\" }}>Yükleniyor...</div>\r\n                            ) : recentClients.length === 0 ? (\r\n                                <div style={{ color: \"#95a5a6\", fontStyle: \"italic\", fontSize: \"14px\" }}>Henüz kayıtlı danışan yok.</div>\r\n                            ) : (\r\n                                recentClients.map((client: any, i: number) => (\r\n                                    <div key={i} style={{\r\n                                        padding: \"15px\",\r\n                                        border: \"1px solid #f1f1f1\",\r\n                                        borderRadius: \"12px\",\r\n                                        display: \"flex\",\r\n                                        justifyContent: \"space-between\",\r\n                                        alignItems: \"center\"\r\n                                    }}>\r\n                                        <div>\r\n                                            <div style={{ fontWeight: 700, color: \"#2c3e50\" }}>{client.full_name}</div>\r\n                                            <div style={{ fontSize: \"12px\", color: \"#95a5a6\" }}>Yeni Danışan</div>\r\n                                        </div>\r\n                                        <span style={{\r\n                                            fontSize: \"12px\",\r\n                                            padding: \"5px 12px\",\r\n                                            borderRadius: \"20px\",\r\n                                            background: \"#eafaf1\",\r\n                                            color: \"#27ae60\",\r\n                                            fontWeight: 700\r\n                                        }}>\r\n                                            Aktif\r\n                                        </span>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Quick Actions */}\r\n                    <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"25px\" }}>\r\n                        <div style={{ background: \"#79a33d\", padding: \"30px\", borderRadius: \"20px\", color: \"white\" }}>\r\n                            <h3 style={{ fontSize: \"20px\", fontWeight: 700, marginBottom: \"15px\" }}>Hızlı Diyet Yaz</h3>\r\n                            <p style={{ fontSize: \"14px\", opacity: 0.9, marginBottom: \"20px\" }}>Danışan seçerek saniyeler içinde yeni bir liste oluşturun.</p>\r\n                            <a href=\"/admin/clients\" style={{\r\n                                background: \"white\",\r\n                                color: \"#79a33d\",\r\n                                border: \"none\",\r\n                                padding: \"12px 25px\",\r\n                                borderRadius: \"10px\",\r\n                                fontWeight: 700,\r\n                                textDecoration: \"none\",\r\n                                display: \"inline-block\",\r\n                                cursor: \"pointer\"\r\n                            }}>Danışanlara Git</a>\r\n                        </div>\r\n\r\n                        <div style={{ background: \"white\", padding: \"30px\", borderRadius: \"20px\", border: \"2px dashed #bdc3c7\" }}>\r\n                            <h3 style={{ fontSize: \"18px\", fontWeight: 700, color: \"#2c3e50\", marginBottom: \"10px\" }}>Besin Kütüphanesi</h3>\r\n                            <p style={{ fontSize: \"13px\", color: \"#7f8c8d\", marginBottom: \"15px\" }}>Yeni besinler ekleyerek listenizi genişletin.</p>\r\n                            <a href=\"/admin/food\" style={{ color: \"#79a33d\", fontWeight: 700, textDecoration: \"none\", fontSize: \"14px\" }}>Yönetmeye Başla →</a>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}