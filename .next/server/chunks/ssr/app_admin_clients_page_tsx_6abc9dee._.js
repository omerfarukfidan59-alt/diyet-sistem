module.exports=[96490,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(64193);function f(){let[a,f]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0);async function l(){k(!0);let{data:a,error:b}=await e.supabase.from("profiles").select("*").eq("role","client").order("created_at",{ascending:!1});!b&&a&&f(a),k(!1)}(0,c.useEffect)(()=>{l()},[]);let m=async(b,c)=>{if(!window.confirm(`${c} isimli danışanı silmek istediğinize emin misiniz? Bu işlem geri alınamaz ve o kişiye ait t\xfcm veriler (diyet, gelişim, kilo, giriş hesabı) kalıcı olarak silinir.`))return;localStorage.removeItem(`diet_${b}`),localStorage.removeItem(`dietProgress_${b}`),localStorage.removeItem(`weightLogs_${b}`);let{error:d,count:g}=await e.supabase.from("profiles").delete({count:"exact"}).eq("id",b);d?(console.error("Silme hatası:",d),alert("Silme işlemi başarısız: "+d.message)):0===g?alert("Uyarı: Kullanıcı veritabanında bulunamadı veya silme izniniz yok (RLS). Lütfen SQL politikalarını kontrol edin."):(f(a.filter(a=>a.id!==b)),alert("Danışan ve tüm verileri başarıyla silindi."))};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,b.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#2c3e50"},children:"Danışan Yönetimi"}),(0,b.jsx)("p",{style:{color:"#7f8c8d"},children:"Sisteme kayıtlı tüm danışanlarınızın listesi ve analiz verileri."})]})}),(0,b.jsx)("div",{style:{background:"white",borderRadius:"20px",overflowX:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.02)"},children:(0,b.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,b.jsx)("thead",{style:{background:"#fcfdfe"},children:(0,b.jsxs)("tr",{style:{textAlign:"left"},children:[(0,b.jsx)("th",{style:g,children:"Ad Soyad"}),(0,b.jsx)("th",{style:g,children:"Boy"}),(0,b.jsx)("th",{style:g,children:"Kilo"}),(0,b.jsx)("th",{style:g,children:"VKI"}),(0,b.jsx)("th",{style:g,children:"BMH"}),(0,b.jsx)("th",{style:g,children:"Hedef"}),(0,b.jsx)("th",{style:g,children:"İşlemler"})]})}),(0,b.jsx)("tbody",{children:j?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Yükleniyor..."})}):a.length>0?a.map(a=>{let c=(Number(a.weight)/(Number(a.height)/100)**2).toFixed(1),e=Number(a.age)||30,f=Math.round(10*Number(a.weight)+6.25*Number(a.height)-5*e+5);return(0,b.jsxs)("tr",{style:{borderBottom:"1px solid #f1f1f1"},children:[(0,b.jsxs)("td",{style:h,children:[(0,b.jsx)("div",{style:{fontWeight:700,color:"#2c3e50"},children:a.full_name}),(0,b.jsxs)("div",{style:{fontSize:"12px",color:"#95a5a6"},children:[a.height," cm | ",a.weight," kg"]})]}),(0,b.jsxs)("td",{style:h,children:[a.height," cm"]}),(0,b.jsxs)("td",{style:h,children:[a.weight," kg"]}),(0,b.jsx)("td",{style:h,children:(0,b.jsx)("span",{style:{background:"#f1f1f1",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600},children:c})}),(0,b.jsx)("td",{style:h,children:(0,b.jsxs)("span",{style:{background:"#f8f9fa",color:"#e67e22",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:700},children:[f," ",(0,b.jsx)("span",{style:{fontSize:"10px",color:"#95a5a6",fontWeight:"normal"},children:"kcal"})]})}),(0,b.jsxs)("td",{style:h,children:[a.target_weight," kg"]}),(0,b.jsx)("td",{style:h,children:(0,b.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,b.jsx)(d.default,{href:`/admin/clients/${a.id}/diet`,style:{textDecoration:"none",background:"#79a33d",color:"white",padding:"8px 15px",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:"Diyet Hazırla"}),(0,b.jsx)("button",{onClick:()=>m(a.id,a.full_name),style:{...i,color:"#e74c3c",fontSize:"14px",fontWeight:"bold",padding:"8px 15px"},children:"Sil"})]})})]},a.id)}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Henüz kayıtlı danışan bulunmuyor."})})})]})})]})})}let g={padding:"20px",color:"#95a5a6",fontSize:"13px",textTransform:"uppercase",letterSpacing:"1px",fontWeight:700},h={padding:"20px",color:"#2c3e50",fontSize:"15px"},i={background:"none",border:"none",cursor:"pointer",fontSize:"18px",padding:"5px",borderRadius:"5px",transition:"background 0.3s"};a.s(["default",()=>f])}];

//# sourceMappingURL=app_admin_clients_page_tsx_6abc9dee._.js.map