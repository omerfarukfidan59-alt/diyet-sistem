(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42846,e=>{"use strict";var t=e.i(43476),i=e.i(71645),l=e.i(22016),n=e.i(56426);function r(){let[e,r]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0);async function x(){c(!0);let{data:e,error:t}=await n.supabase.from("profiles").select("*").eq("role","client").order("created_at",{ascending:!1});!t&&e&&r(e),c(!1)}(0,i.useEffect)(()=>{x()},[]);let h=async(t,i)=>{if(!window.confirm(`${i} isimli danışanı silmek istediğinize emin misiniz? Bu işlem geri alınamaz ve o kişiye ait t\xfcm veriler (diyet, gelişim, kilo, giriş hesabı) kalıcı olarak silinir.`))return;localStorage.removeItem(`diet_${t}`),localStorage.removeItem(`dietProgress_${t}`),localStorage.removeItem(`weightLogs_${t}`);let{error:l,count:s}=await n.supabase.from("profiles").delete({count:"exact"}).eq("id",t);l?(console.error("Silme hatası:",l),alert("Silme işlemi başarısız: "+l.message)):0===s?alert("Uyarı: Kullanıcı veritabanında bulunamadı veya silme izniniz yok (RLS). Lütfen SQL politikalarını kontrol edin."):(r(e.filter(e=>e.id!==t)),alert("Danışan ve tüm verileri başarıyla silindi."))};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#2c3e50"},children:"Danışan Yönetimi"}),(0,t.jsx)("p",{style:{color:"#7f8c8d"},children:"Sisteme kayıtlı tüm danışanlarınızın listesi ve analiz verileri."})]})}),(0,t.jsx)("div",{style:{background:"white",borderRadius:"20px",overflowX:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.02)"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{style:{background:"#fcfdfe"},children:(0,t.jsxs)("tr",{style:{textAlign:"left"},children:[(0,t.jsx)("th",{style:s,children:"Ad Soyad"}),(0,t.jsx)("th",{style:s,children:"Boy"}),(0,t.jsx)("th",{style:s,children:"Kilo"}),(0,t.jsx)("th",{style:s,children:"VKI"}),(0,t.jsx)("th",{style:s,children:"BMH"}),(0,t.jsx)("th",{style:s,children:"Hedef"}),(0,t.jsx)("th",{style:s,children:"İşlemler"})]})}),(0,t.jsx)("tbody",{children:o?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Yükleniyor..."})}):e.length>0?e.map(e=>{let i=(Number(e.weight)/(Number(e.height)/100)**2).toFixed(1),n=Number(e.age)||30,r=Math.round(10*Number(e.weight)+6.25*Number(e.height)-5*n+5);return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f1f1f1"},children:[(0,t.jsxs)("td",{style:a,children:[(0,t.jsx)("div",{style:{fontWeight:700,color:"#2c3e50"},children:e.full_name}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#95a5a6"},children:[e.height," cm | ",e.weight," kg"]})]}),(0,t.jsxs)("td",{style:a,children:[e.height," cm"]}),(0,t.jsxs)("td",{style:a,children:[e.weight," kg"]}),(0,t.jsx)("td",{style:a,children:(0,t.jsx)("span",{style:{background:"#f1f1f1",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600},children:i})}),(0,t.jsx)("td",{style:a,children:(0,t.jsxs)("span",{style:{background:"#f8f9fa",color:"#e67e22",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:700},children:[r," ",(0,t.jsx)("span",{style:{fontSize:"10px",color:"#95a5a6",fontWeight:"normal"},children:"kcal"})]})}),(0,t.jsxs)("td",{style:a,children:[e.target_weight," kg"]}),(0,t.jsx)("td",{style:a,children:(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,t.jsx)(l.default,{href:`/admin/clients/${e.id}/diet`,style:{textDecoration:"none",background:"#79a33d",color:"white",padding:"8px 15px",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:"Diyet Hazırla"}),(0,t.jsx)("button",{onClick:()=>h(e.id,e.full_name),style:{...d,color:"#e74c3c",fontSize:"14px",fontWeight:"bold",padding:"8px 15px"},children:"Sil"})]})})]},e.id)}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Henüz kayıtlı danışan bulunmuyor."})})})]})})]})})}let s={padding:"20px",color:"#95a5a6",fontSize:"13px",textTransform:"uppercase",letterSpacing:"1px",fontWeight:700},a={padding:"20px",color:"#2c3e50",fontSize:"15px"},d={background:"none",border:"none",cursor:"pointer",fontSize:"18px",padding:"5px",borderRadius:"5px",transition:"background 0.3s"};e.s(["default",()=>r])}]);