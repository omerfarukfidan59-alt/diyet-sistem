(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42846,e=>{"use strict";var t=e.i(43476),l=e.i(71645),i=e.i(22016),r=e.i(56426);function n(){let[n,h]=(0,l.useState)([]),[x,p]=(0,l.useState)(!0),[g,u]=(0,l.useState)(!1),[y,f]=(0,l.useState)(!1),[b,m]=(0,l.useState)({full_name:"",height:"",weight:"",target_weight:"",age:"",gender:"Erkek"});async function j(){p(!0);let{data:e,error:t}=await r.supabase.from("profiles").select("*").eq("role","client").order("created_at",{ascending:!1});!t&&e&&h(e),p(!1)}(0,l.useEffect)(()=>{j()},[]);let k=async t=>{t.preventDefault(),f(!0);try{let{createClient:t}=await e.A(31002),l=t("https://gmdjktwstzuhlbnkfsmh.supabase.co","sb_publishable_4ZAWHxhYMwyCmz6K2OTnTw_gnWbcDXN",{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),i=`manual_${Date.now()}@diyet.local`,n="Password"+Math.random().toString(36).slice(-8)+"!",{data:a,error:s}=await l.auth.signUp({email:i,password:n,options:{data:{full_name:b.full_name,role:"client"}}});if(s)throw s;if(a.user){let{error:e}=await r.supabase.from("profiles").upsert({id:a.user.id,full_name:b.full_name,role:"client",height:Number(b.height),weight:Number(b.weight),target_weight:Number(b.target_weight),age:Number(b.age),gender:b.gender});if(e)throw e;alert("Danışan başarıyla eklendi!"),u(!1),m({full_name:"",height:"",weight:"",target_weight:"",age:"",gender:"Erkek"}),j()}}catch(e){console.error("Ekleme hatası:",e),alert("Danışan eklenirken bir hata oluştu: "+e.message)}finally{f(!1)}},v=async(e,t)=>{if(!window.confirm(`${t} isimli danışanı silmek istediğinize emin misiniz? Bu işlem geri alınamaz ve o kişiye ait t\xfcm veriler (diyet, gelişim, kilo, giriş hesabı) kalıcı olarak silinir.`))return;localStorage.removeItem(`diet_${e}`),localStorage.removeItem(`dietProgress_${e}`),localStorage.removeItem(`weightLogs_${e}`);let{error:l,count:i}=await r.supabase.from("profiles").delete({count:"exact"}).eq("id",e);l?(console.error("Silme hatası:",l),alert("Silme işlemi başarısız: "+l.message)):0===i?alert("Uyarı: Kullanıcı veritabanında bulunamadı veya silme izniniz yok (RLS). Lütfen SQL politikalarını kontrol edin."):(h(n.filter(t=>t.id!==e)),alert("Danışan ve tüm verileri başarıyla silindi."))};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#2c3e50"},children:"Danışan Yönetimi"}),(0,t.jsx)("p",{style:{color:"#7f8c8d"},children:"Sisteme kayıtlı tüm danışanlarınızın listesi ve analiz verileri."})]}),(0,t.jsx)("button",{onClick:()=>u(!0),style:{background:"#79a33d",color:"white",border:"none",padding:"12px 24px",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 6px rgba(121, 163, 61, 0.2)"},children:"+ Danışan Ekle"})]}),(0,t.jsx)("div",{style:{background:"white",borderRadius:"20px",overflowX:"auto",boxShadow:"0 10px 20px rgba(0,0,0,0.02)"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{style:{background:"#fcfdfe"},children:(0,t.jsxs)("tr",{style:{textAlign:"left"},children:[(0,t.jsx)("th",{style:a,children:"Ad Soyad"}),(0,t.jsx)("th",{style:a,children:"Boy"}),(0,t.jsx)("th",{style:a,children:"Kilo"}),(0,t.jsx)("th",{style:a,children:"VKI"}),(0,t.jsx)("th",{style:a,children:"BMH"}),(0,t.jsx)("th",{style:a,children:"Hedef"}),(0,t.jsx)("th",{style:a,children:"İşlemler"})]})}),(0,t.jsx)("tbody",{children:x?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Yükleniyor..."})}):n.length>0?n.map(e=>{let l=(Number(e.weight)/(Number(e.height)/100)**2).toFixed(1),r=Number(e.age)||30,n=e.gender||"Erkek",a=0,o=Number(e.target_weight)||Number(e.weight);return a="Kadın"===n?Math.round(10*o+6.25*Number(e.height)-5*r-161):Math.round(10*o+6.25*Number(e.height)-5*r+5),(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f1f1f1"},children:[(0,t.jsxs)("td",{style:s,children:[(0,t.jsx)("div",{style:{fontWeight:700,color:"#2c3e50"},children:e.full_name}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#95a5a6"},children:[e.height," cm | ",e.weight," kg"]})]}),(0,t.jsxs)("td",{style:s,children:[e.height," cm"]}),(0,t.jsxs)("td",{style:s,children:[e.weight," kg"]}),(0,t.jsx)("td",{style:s,children:(0,t.jsx)("span",{style:{background:"#f1f1f1",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:600},children:l})}),(0,t.jsx)("td",{style:s,children:(0,t.jsxs)("span",{style:{background:"#f8f9fa",color:"#e67e22",padding:"4px 10px",borderRadius:"20px",fontSize:"13px",fontWeight:700},children:[a," ",(0,t.jsx)("span",{style:{fontSize:"10px",color:"#95a5a6",fontWeight:"normal"},children:"kcal"})]})}),(0,t.jsxs)("td",{style:s,children:[e.target_weight," kg"]}),(0,t.jsx)("td",{style:s,children:(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,t.jsx)(i.default,{href:`/admin/clients/${e.id}/diet`,style:{textDecoration:"none",background:"#79a33d",color:"white",padding:"8px 15px",borderRadius:"8px",fontSize:"13px",fontWeight:700},children:"Diyet Hazırla"}),(0,t.jsx)("button",{onClick:()=>v(e.id,e.full_name),style:{...d,color:"#e74c3c",fontSize:"14px",fontWeight:"bold",padding:"8px 15px"},children:"Sil"})]})})]},e.id)}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,style:{padding:"50px",textAlign:"center",color:"#95a5a6"},children:"Henüz kayıtlı danışan bulunmuyor."})})})]})}),g&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,t.jsxs)("div",{style:{background:"white",padding:"30px",borderRadius:"15px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[(0,t.jsx)("h2",{style:{marginTop:0,marginBottom:"20px",color:"#2c3e50"},children:"Manuel Danışan Ekle"}),(0,t.jsxs)("form",{onSubmit:k,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:o,children:"Ad Soyad"}),(0,t.jsx)("input",{required:!0,type:"text",style:c,value:b.full_name,onChange:e=>m({...b,full_name:e.target.value}),placeholder:"Örn: Ali Yılmaz"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:o,children:"Boy (cm)"}),(0,t.jsx)("input",{required:!0,type:"number",style:c,value:b.height,onChange:e=>m({...b,height:e.target.value}),placeholder:"180"})]}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:o,children:"Kilo (kg)"}),(0,t.jsx)("input",{required:!0,type:"number",step:"0.1",style:c,value:b.weight,onChange:e=>m({...b,weight:e.target.value}),placeholder:"75"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:o,children:"Hedef Kilo (kg)"}),(0,t.jsx)("input",{required:!0,type:"number",step:"0.1",style:c,value:b.target_weight,onChange:e=>m({...b,target_weight:e.target.value}),placeholder:"70"})]}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("label",{style:o,children:"Yaş"}),(0,t.jsx)("input",{required:!0,type:"number",style:c,value:b.age,onChange:e=>m({...b,age:e.target.value}),placeholder:"30"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:o,children:"Cinsiyet"}),(0,t.jsxs)("select",{style:c,value:b.gender,onChange:e=>m({...b,gender:e.target.value}),children:[(0,t.jsx)("option",{value:"Erkek",children:"Erkek"}),(0,t.jsx)("option",{value:"Kadın",children:"Kadın"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,t.jsx)("button",{type:"button",onClick:()=>u(!1),style:{padding:"10px 20px",border:"none",background:"#ecf0f1",color:"#7f8c8d",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"İptal"}),(0,t.jsx)("button",{type:"submit",disabled:y,style:{padding:"10px 20px",border:"none",background:"#79a33d",color:"white",borderRadius:"8px",cursor:y?"not-allowed":"pointer",fontWeight:600,opacity:y?.7:1},children:y?"Ekleniyor...":"Kaydet"})]})]})]})})]})})}let a={padding:"20px",color:"#95a5a6",fontSize:"13px",textTransform:"uppercase",letterSpacing:"1px",fontWeight:700},s={padding:"20px",color:"#2c3e50",fontSize:"15px"},d={background:"none",border:"none",cursor:"pointer",fontSize:"18px",padding:"5px",borderRadius:"5px",transition:"background 0.3s"},o={display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:600,color:"#34495e"},c={width:"100%",padding:"10px 15px",border:"1px solid #bdc3c7",borderRadius:"8px",fontSize:"15px",boxSizing:"border-box",outline:"none",transition:"border-color 0.3s"};e.s(["default",()=>n])},31002,e=>{e.v(t=>Promise.all(["static/chunks/6d7bc1d0ccdda8db.js"].map(t=>e.l(t))).then(()=>t(26852)))}]);