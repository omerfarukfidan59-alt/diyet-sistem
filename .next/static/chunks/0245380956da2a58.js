(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70679,e=>{"use strict";var i=e.i(43476),t=e.i(71645),l=e.i(18566),n=e.i(56426);function d(){let[e,d]=(0,t.useState)(null),[r,o]=(0,t.useState)(null),[a,s]=(0,t.useState)(0),[p,c]=(0,t.useState)({}),[x,h]=(0,t.useState)(!0),g=(0,l.useRouter)();(0,t.useEffect)(()=>{!async function(){h(!0);let{data:{user:e}}=await n.supabase.auth.getUser();if(!e)return g.push("/login");let{data:i}=await n.supabase.from("profiles").select("*").eq("id",e.id).single();i&&d(i);let{data:t}=await n.supabase.from("diets").select("*").eq("client_id",e.id).eq("is_active",!0).maybeSingle();t&&t.content&&o(t.content);let{data:l}=await n.supabase.from("diet_progress").select("*").eq("client_id",e.id);if(l){let e={};l.forEach(i=>{e[i.day_number-1]={completed:i.is_completed,note:i.note}}),c(e)}h(!1)}()},[g]);let m=async()=>{let i;if(!e)return;h(!0);let t=p[a]||{completed:!1,note:""},{data:l}=await n.supabase.from("diet_progress").select("id").eq("client_id",e.id).eq("day_number",a+1).maybeSingle();if(l){let{error:e}=await n.supabase.from("diet_progress").update({is_completed:t.completed,note:t.note}).eq("id",l.id);i=e}else{let{error:l}=await n.supabase.from("diet_progress").insert({client_id:e.id,day_number:a+1,is_completed:t.completed,note:t.note});i=l}i?alert("Değerlendirme gönderilemedi: "+i.message):alert("Değerlendirmeniz başarıyla kaydedildi! Diyetisyeniniz bunu görebilecektir."),h(!1)};return x||!e?(0,i.jsx)("div",{children:"Yükleniyor..."}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{flex:1,padding:"50px",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,i.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#333"},children:"Günlük Diyet Listem"}),(0,i.jsx)("p",{style:{color:"#666"},children:"Diyetisyeniniz tarafından size özel hazırlanan beslenme programı."})]}),r&&r.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{display:"flex",gap:"10px",marginBottom:"25px",overflowX:"auto",paddingBottom:"10px"},children:r.map((e,t)=>(0,i.jsxs)("button",{onClick:()=>s(t),style:{padding:"12px 25px",background:a===t?"#79a33d":"white",color:a===t?"white":"#333",border:`1px solid ${a===t?"#79a33d":"#e0e0e0"}`,borderRadius:"10px",fontWeight:700,cursor:"pointer",transition:"all 0.2s"},children:[e.day||t+1,". Gün"]},t))}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"25px"},children:[{key:"breakfast",label:"Kahvaltı"},{key:"lunch",label:"Öğle Yemeği"},{key:"snacks",label:"Ara Öğünler"},{key:"dinner",label:"Akşam Yemeği"}].map(e=>(0,i.jsxs)("div",{style:{background:"white",padding:"25px",borderRadius:"15px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:700,color:"#3d5a2d",marginBottom:"15px"},children:e.label}),r[a]&&r[a][e.key]&&r[a][e.key].length>0?(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{textAlign:"left",fontSize:"12px",color:"#888",borderBottom:"1px solid #f0f0f0"},children:[(0,i.jsx)("th",{style:{padding:"10px"},children:"Besin"}),(0,i.jsx)("th",{style:{padding:"10px"},children:"Porsiyon"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"right"},children:"Kalori"})]})}),(0,i.jsx)("tbody",{children:r[a][e.key].map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f9f9f9"},children:[(0,i.jsx)("td",{style:{padding:"12px 10px",fontWeight:600,color:"#333"},children:e.food}),(0,i.jsx)("td",{style:{padding:"12px 10px",color:"#666"},children:e.portion}),(0,i.jsxs)("td",{style:{padding:"12px 10px",color:"#79a33d",fontWeight:700,textAlign:"right"},children:[e.cal," kcal"]})]},t))})]}):(0,i.jsx)("p",{style:{color:"#999",fontSize:"14px"},children:"Bu öğün için program belirtilmemiş."})]},e.key))}),(0,i.jsxs)("div",{style:{marginTop:"40px",background:"white",padding:"30px",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,i.jsx)("h3",{style:{fontSize:"20px",fontWeight:800,color:"#2c3e50",marginBottom:"20px"},children:"Gün Sonu Değerlendirmesi"}),(0,i.jsx)("p",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"20px"},children:"Diyetisyeninize bu günü nasıl geçirdiğinizi bildirin."}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px",padding:"15px",background:"#f8f9fa",borderRadius:"10px"},children:[(0,i.jsx)("input",{type:"checkbox",id:"completedCheck",checked:p[a]?.completed||!1,onChange:e=>{let i={...p};i[a]||(i[a]={completed:!1,note:""}),i[a].completed=e.target.checked,c(i)},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#79a33d"}}),(0,i.jsx)("label",{htmlFor:"completedCheck",style:{fontWeight:600,color:"#333",cursor:"pointer",fontSize:"15px"},children:"Bugünkü listemi eksiksiz uyguladım ✅"})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsx)("label",{style:{display:"block",fontWeight:600,color:"#333",marginBottom:"10px",fontSize:"15px"},children:"Diyetisyeninize bir not bırakın (İsteğe bağlı)"}),(0,i.jsx)("textarea",{value:p[a]?.note||"",onChange:e=>{let i={...p};i[a]||(i[a]={completed:!1,note:""}),i[a].note=e.target.value,c(i)},placeholder:"Örn: Akşam yemeğinde doyduğum için salatayı yarım bıraktım...",style:{width:"100%",padding:"15px",borderRadius:"10px",border:"1px solid #ddd",minHeight:"100px",fontFamily:"inherit",fontSize:"14px",resize:"vertical"}})]}),(0,i.jsx)("button",{onClick:m,style:{background:"#79a33d",color:"white",border:"none",padding:"15px 30px",borderRadius:"10px",fontWeight:700,fontSize:"15px",cursor:"pointer",width:"100%",transition:"background 0.3s"},children:"Değerlendirmeyi Kaydet"})]})]}):(0,i.jsxs)("div",{style:{background:"white",padding:"100px",borderRadius:"20px",textAlign:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.03)"},children:[(0,i.jsx)("div",{style:{fontSize:"50px",marginBottom:"20px"}}),(0,i.jsx)("h2",{style:{color:"#3d5a2d"},children:"Henüz Diyet Listeniz Hazır Değil"}),(0,i.jsx)("p",{style:{color:"#888",maxWidth:"400px",margin:"10px auto"},children:"Diyetisyeniniz listenizi tamamladığında burada anlık olarak görebileceksiniz."})]})]})})}e.s(["default",()=>d])}]);