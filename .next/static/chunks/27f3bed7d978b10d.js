(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56426,e=>{"use strict";let t=(0,e.i(88715).createClient)("https://gmdjktwstzuhlbnkfsmh.supabase.co","sb_publishable_4ZAWHxhYMwyCmz6K2OTnTw_gnWbcDXN");e.s(["supabase",0,t])},91064,e=>{"use strict";var t=e.i(43476),i=e.i(71645),l=e.i(18566),r=e.i(56426);function n(){let e=(0,l.useRouter)(),[n,d]=(0,i.useState)(null),[x,h]=(0,i.useState)([]),[c,g]=(0,i.useState)(""),[p,f]=(0,i.useState)(new Date().toISOString().split("T")[0]),[u,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{!async function(){m(!0);let{data:{user:t}}=await r.supabase.auth.getUser();if(!t)return e.push("/login");let{data:i}=await r.supabase.from("profiles").select("*").eq("id",t.id).single();i&&d({id:i.id,name:i.full_name,weight:Number(i.weight),targetWeight:Number(i.target_weight)});let{data:l}=await r.supabase.from("weight_logs").select("*").eq("client_id",t.id).order("log_date",{ascending:!0});l&&l.length>0?h(l.map(e=>({date:e.log_date,weight:Number(e.weight)}))):i&&i.weight&&h([{date:new Date().toISOString().split("T")[0],weight:Number(i.weight)}]),m(!1)}()},[e]);let y=async e=>{let t;if(e.preventDefault(),!c||isNaN(Number(c)))return alert("Geçerli bir kilo giriniz.");let i=p||new Date().toISOString().split("T")[0];m(!0);let{data:l}=await r.supabase.from("weight_logs").select("id").eq("client_id",n.id).eq("log_date",i).maybeSingle();if(l){let{error:e}=await r.supabase.from("weight_logs").update({weight:Number(c)}).eq("id",l.id);t=e}else{let{error:e}=await r.supabase.from("weight_logs").insert({client_id:n.id,log_date:i,weight:Number(c)});t=e}if(t){alert("Kilo kaydedilemedi: "+t.message),m(!1);return}let{error:s}=await r.supabase.from("profiles").update({weight:Number(c)}).eq("id",n.id);s||d({...n,weight:Number(c)});let{data:o}=await r.supabase.from("weight_logs").select("*").eq("client_id",n.id).order("log_date",{ascending:!0});o&&h(o.map(e=>({date:e.log_date,weight:Number(e.weight)}))),g(""),m(!1)};if(u||!n)return(0,t.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Yükleniyor..."});let b=x.map(e=>e.weight),j=Number(n.targetWeight)||0,w=Math.min(...b,j)-2,k=Math.max(...b,j)+2,S=k-w,v=e=>1===x.length?400:40+e*(720/(x.length-1)),W=e=>260-(e-w)/S*220,z=W(j),_=x.map((e,t)=>{let i=v(t),l=W(e.weight);return`${0===t?"M":"L"} ${i} ${l}`}).join(" ");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{flex:1,padding:"50px 40px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,t.jsxs)("div",{style:{width:"100%",maxWidth:"1000px"},children:[(0,t.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,t.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:"#333",marginBottom:"10px"},children:"Gelişim Grafiği"}),(0,t.jsx)("p",{style:{color:"#666"},children:"Zaman içindeki kilo değişiminizi ve hedefinize olan uzaklığınızı buradan takip edebilirsiniz."})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"25px",marginBottom:"40px"},className:"stats-grid-mobile",children:[(0,t.jsxs)("div",{style:s,children:[(0,t.jsx)("div",{style:o,children:"Güncel Kilo"}),(0,t.jsxs)("div",{style:a,children:[n.weight," ",(0,t.jsx)("span",{style:{fontSize:"16px",color:"#95a5a6"},children:"kg"})]})]}),(0,t.jsxs)("div",{style:s,children:[(0,t.jsx)("div",{style:o,children:"Hedef Kilo"}),(0,t.jsxs)("div",{style:a,children:[j," ",(0,t.jsx)("span",{style:{fontSize:"16px",color:"#95a5a6"},children:"kg"})]})]}),(0,t.jsxs)("div",{style:{...s,background:"#79a33d",color:"white"},children:[(0,t.jsx)("div",{style:{...o,color:"rgba(255,255,255,0.8)"},children:"Kalan Yol"}),(0,t.jsxs)("div",{style:{...a,color:"white"},children:[Math.abs(Number(n.weight)-j).toFixed(1)," ",(0,t.jsx)("span",{style:{fontSize:"16px",color:"rgba(255,255,255,0.8)"},children:"kg"})]})]})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"40px",borderRadius:"20px",boxShadow:"0 10px 40px rgba(0,0,0,0.04)",marginBottom:"40px",overflowX:"auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[(0,t.jsx)("h3",{style:{fontSize:"20px",fontWeight:700,color:"#3d5a2d"},children:"Kilo Değişim Grafiği"}),(0,t.jsx)("div",{style:{fontSize:"14px",color:"#7f8c8d",fontWeight:600},children:"Dikey: Kilo (kg) | Yatay: Tarih (Gün)"})]}),x.length>0?(0,t.jsx)("div",{style:{minWidth:"600px",position:"relative"},children:(0,t.jsxs)("svg",{width:"100%",height:300,viewBox:"0 0 800 300",style:{overflow:"visible"},children:[(0,t.jsx)("line",{x1:40,y1:10,x2:40,y2:260,stroke:"#bdc3c7",strokeWidth:"2"}),(0,t.jsx)("text",{x:40,y:0,fill:"#2c3e50",fontSize:"13",fontWeight:"bold",textAnchor:"middle",children:"Kilo (kg)"}),[0,.25,.5,.75,1].map((e,i)=>{let l=40+220*e;return(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:40,y1:l,x2:780,y2:l,stroke:"#f0f0f0",strokeWidth:"1"}),(0,t.jsx)("text",{x:30,y:l+4,fill:"#95a5a6",fontSize:"11",textAnchor:"end",children:(k-S*e).toFixed(1)})]},i)}),(0,t.jsx)("line",{x1:40,y1:260,x2:800,y2:260,stroke:"#bdc3c7",strokeWidth:"2"}),(0,t.jsx)("text",{x:815,y:264,fill:"#2c3e50",fontSize:"13",fontWeight:"bold",textAnchor:"start",children:"Gün"}),j>0&&(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:40,y1:z,x2:780,y2:z,stroke:"#e74c3c",strokeWidth:"2",strokeDasharray:"5,5"}),(0,t.jsxs)("text",{x:790,y:z+4,fill:"#e74c3c",fontSize:"12",fontWeight:"bold",children:["Hedef: ",j,"kg"]})]}),x.length>1?(0,t.jsx)("path",{d:_,fill:"none",stroke:"#79a33d",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}):1===x.length&&(0,t.jsx)("line",{x1:40,y1:W(x[0].weight),x2:v(0),y2:W(x[0].weight),stroke:"#79a33d",strokeWidth:"4",strokeDasharray:"10,10",opacity:.3}),x.map((e,i)=>{let l=v(i),r=W(e.weight);return(0,t.jsxs)("g",{children:[(0,t.jsx)("circle",{cx:l,cy:r,r:"6",fill:"#79a33d",stroke:"white",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:l,cy:r,r:"10",fill:"transparent",stroke:"#79a33d",strokeWidth:"2",opacity:"0.5"}),(0,t.jsxs)("text",{x:l,y:r-20,textAnchor:"middle",fill:"#2c3e50",fontSize:"13",fontWeight:"bold",children:[e.weight,"kg"]}),(0,t.jsx)("line",{x1:l,y1:260,x2:l,y2:265,stroke:"#bdc3c7",strokeWidth:"2"}),(0,t.jsx)("text",{x:l,y:280,textAnchor:"middle",fill:"#95a5a6",fontSize:"11",children:new Date(e.date).toLocaleDateString("tr-TR",{day:"numeric",month:"short"})})]},i)})]})}):(0,t.jsx)("div",{style:{textAlign:"center",padding:"50px",color:"#95a5a6"},children:"Henüz yeterli kilo verisi girilmedi."})]}),(0,t.jsxs)("div",{style:{background:"white",padding:"40px",borderRadius:"20px",boxShadow:"0 10px 40px rgba(0,0,0,0.04)"},children:[(0,t.jsx)("h3",{style:{fontSize:"18px",fontWeight:700,color:"#333",marginBottom:"20px"},children:"Yeni Tartım Ekle"}),(0,t.jsxs)("form",{onSubmit:y,style:{display:"flex",flexWrap:"wrap",gap:"15px",alignItems:"flex-end"},children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:"200px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,t.jsx)("label",{style:{fontSize:"13px",fontWeight:700,color:"#666"},children:"Tarih Seçimi"}),(0,t.jsx)("input",{type:"date",value:p,onChange:e=>f(e.target.value),style:{padding:"15px 20px",borderRadius:"10px",border:"1px solid #e0e0e0",outline:"none",fontSize:"15px",fontWeight:600,fontFamily:"inherit"}})]}),(0,t.jsxs)("div",{style:{flex:1,minWidth:"200px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,t.jsx)("label",{style:{fontSize:"13px",fontWeight:700,color:"#666"},children:"Kilonuz (kg)"}),(0,t.jsx)("input",{type:"number",step:"0.1",value:c,onChange:e=>g(e.target.value),placeholder:"Örn: 74.5",style:{padding:"15px 20px",borderRadius:"10px",border:"1px solid #e0e0e0",outline:"none",fontSize:"15px",fontWeight:600}})]}),(0,t.jsx)("button",{type:"submit",style:{background:"#79a33d",color:"white",padding:"15px 30px",borderRadius:"10px",border:"none",fontSize:"15px",fontWeight:700,cursor:"pointer",boxShadow:"0 10px 20px rgba(121, 163, 61, 0.2)"},children:"++ Ekle"})]})]})]})}),(0,t.jsx)("style",{children:`
            @media (max-width: 1024px) {
                .stats-grid-mobile {
                    grid-template-columns: 1fr !important;
                }
            }
            `})]})}let s={background:"white",padding:"30px",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0,0,0,0.03)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},o={fontSize:"14px",fontWeight:700,color:"#7f8c8d",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"1px"},a={fontSize:"36px",fontWeight:800,color:"#2c3e50"};e.s(["default",()=>n])}]);